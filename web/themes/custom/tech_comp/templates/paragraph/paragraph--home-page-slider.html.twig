{% set slides = [] %}

{% for item in paragraph.field_home_page_slider_ref %}
  {% set slide = item.entity %}

  {% set slides = slides|merge([{
    heading: slide.field_field_heading.value,
    description: slide.field_slider_description.value,
    image: slide.field_slider_image.entity
      ? file_url(slide.field_slider_image.entity.field_media_image.entity.uri.value)
      : '',
    cta: slide.field_cta.entity
      ? {
          title: slide.field_cta.entity.field_link.title,
          url: slide.field_cta.entity.field_link.uri
        }
      : null
  }]) %}
{% endfor %}

{% include '@tech_comp/components/slider/slider.twig' with {
  slides: slides
} only %}
